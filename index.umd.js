(function(a,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("tweakpane")):typeof define=="function"&&define.amd?define(["tweakpane"],s):(a=typeof globalThis<"u"?globalThis:a||self,a.TweakPaneConfigurator=s(a.TweakPane))})(this,function(a){"use strict";var O=Object.defineProperty;var W=(a,s,d)=>s in a?O(a,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[s]=d;var p=(a,s,d)=>W(a,typeof s!="symbol"?s+"":s,d);const s={display:"block",width:"100%",height:"auto",maxWidth:"100%",minWidth:"100%",minHeight:"100%",maxHeight:"100%",padding:"0",margin:"0",border:"1px solid transparent",boxSizing:"border-box"},d={position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto",zIndex:0},f={backgroundColor:"#ffffff",backgroundImage:"none",backgroundSize:"cover",color:"#000000",opacity:1},u={fontSize:"16px",fontFamily:"Arial, sans-serif",fontWeight:"normal",textAlign:"left",lineHeight:"1.5",textTransform:"none"},m={displayFlex:"none",displayGrid:"none",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",gridTemplateColumns:"1fr",gridTemplateRows:"1fr"},x={overflow:"visible",borderRadius:"0px",boxShadow:"none"},b={fontFamily:"Arial, sans-serif",fontSize:"16px",fontWeight:"normal",fontStyle:"normal",textAlign:"left",letterSpacing:"normal",lineHeight:"1.5",textTransform:"none",textDecoration:"none",textShadow:"none"},S={whiteSpace:"normal",wordWrap:"normal",wordBreak:"normal"},P={layoutAndBoxModel:s,positioning:d,backgroundAndColor:f,typography:u,flexAndGrid:m,other:x},C={...P,objectFit:"contain",objectPosition:"center center"},w={...P,fontAndTextStyling:b,cursor:"pointer"},A={div:{layoutAndBoxModel:s,positioning:d,backgroundAndColor:f,typography:u,flexAndGrid:m,other:x},text:{fontAndTextStyling:b,textLayout:S,backgroundAndColor:f},image:C,button:w},z=l=>{var i;const t=(i=l.split("$TWEAK_CSS_CONFIG_")[1])==null?void 0:i.toLowerCase();return A[t]},F=["color","backgroundColor","font","fontSize","fontWeight","fontFamily","lineHeight","textAlign","margin","padding","border","borderRadius","boxShadow","width","height","minWidth","minHeight","maxWidth","maxHeight","display","position","top","right","bottom","left","zIndex","opacity","visibility","flex","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","gap","gridTemplateColumns","gridTemplateRows","gridColumn","gridRow","gridArea","textTransform","letterSpacing","wordSpacing","cursor","transition","transform","boxSizing","overflow","resize","whiteSpace","textOverflow","visibility","objectFit","objectPosition","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","filter","clipPath","boxShadow","outline","outlineOffset","borderWidth","borderStyle","borderColor","opacity","userSelect","pointerEvents","boxDecorationBreak"],h=l=>{let t={};function i(o){let n=[];for(let e of F)if(e=e.toLowerCase(),o.toLowerCase().endsWith(e)){const r=o.slice(0,o.length-e.length),c=e.charAt(0).toLowerCase()+e.slice(1);n.push({prefix:r,cssPropName:c,matchLength:e.length})}return n.length>0?(n.sort((e,r)=>r.matchLength-e.matchLength),n[0]):o}return Object.entries(l).forEach(([o,n])=>{if(typeof n=="object")return t[o]=n;if(typeof n=="string"&&n.startsWith("$TWEAK_CSS_CONFIG"))return t[o]=z(n);const e=i(o);if(e&&typeof e=="object"&&"prefix"in e&&"cssPropName"in e){const{prefix:r,cssPropName:c}=e;if(t[r]){t[r]=n;return}t[r]||(t[r]={}),t[r][c]=n}else t[o]=n}),console.log("Sanitized props..",t),t};let y="";function g(l,t=""){let i={};return y||(y=Object.keys(l)[0]),Object.entries(l).forEach(([o,n])=>{const e=t?`${t}`:o;typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(i,g(n,e)):i[`${e}${o.charAt(0).toUpperCase()+o.slice(1)}`]=n}),i}const j=["margin","padding","borderWidth"];class T{constructor(t){p(this,"pane");p(this,"props");p(this,"folders",[]);p(this,"sanitizedProps");p(this,"config");this.pane=new a.Pane,this.config=t,this.config.restructureProps=t.props.restructureProps||!0,this.props=t.props,this.sanitizedProps=t.restructureProps?h(this.props):this.props,this.createPanel(this.sanitizedProps),t.showJsonInput&&this.createJsonInput(),this.pane.on("change",()=>{console.log("Normal input config: ",this.sanitizedProps),console.log("Flatten input config: ",g(this.sanitizedProps))})}createPanel(t,i=null){i||this.clearFolders(),Object.entries(t).forEach(([o,n])=>{if(n||(t[o]=""),typeof n=="object"){const e=this.pane.addFolder({title:o,expanded:this.config.expanded??!1});this.folders.push(e),Object.entries(n).forEach(([r,c])=>{if(c&&typeof c=="object"){const I=e.addFolder({title:r,expanded:this.config.expanded??!1});this.createPanel(c,I);return}j.includes(r)?this.createFourSidedControl(e,t[o],r):e.addBinding(t[o],r)})}else i?i.addBinding(t,o):this.pane.addBinding(t,o)})}createFourSidedControl(t,i,o){const n=t.addFolder({title:o.charAt(0)+o.slice(1),expanded:!1});let e=i[o]||"0";(typeof e=="string"&&!e.includes(" ")||typeof e=="number")&&(i[o]={top:e,bottom:e,left:e,right:e}),Object.keys(i[o]).forEach(r=>{n.addBinding(i[o],r)})}createJsonInput(){const t=document.createElement("div");t.id="app",document.body.appendChild(t);const i=document.createElement("label");i.id="message",t.appendChild(i);const o=document.createElement("textarea");o.id="jsonInput",o.rows=10,o.cols=50,o.placeholder="Paste test JSON config here",t.appendChild(o),o.addEventListener("input",n=>{try{const e=n.target.value;this.props=h(JSON.parse(e)),this.createPanel(this.props),i.textContent=""}catch(e){console.error("Invalid JSON:",e),i.textContent="Invalid JSON!"}})}clearFolders(){this.folders.forEach(t=>t.dispose()),this.folders=[]}updateProps(t){this.sanitizedProps=h(t),this.createPanel(this.sanitizedProps)}getFlattenedProps(){return g(this.sanitizedProps)}}return T});
